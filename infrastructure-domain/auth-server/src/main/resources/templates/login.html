<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ForoHub</title>
    <link rel="icon" type="image/png" th:href="@{/icons/favicon.png}">
    <link rel="stylesheet" th:href="@{/css/login.css}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" as="style">
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
          theme: {
            extend: {
              fontFamily: { inter: ['Inter', 'sans-serif'] },
              screens: {
                'sm-380': '380px',
                'sm-420': '420px',
                'sm-500': '500px',
                'xs': '320px',
              },
            },
          },
        };
    </script>
</head>
<body class="min-h-screen bg-gray-900 font-inter text-white">

<header class="bg-gray-900 text-white shadow-xl relative">
    <div class="max-w-[50rem] lg:max-w-[60rem] mx-auto flex items-center justify-between px-4 py-5">

        <a th:href="${frontendUrl}" class="flex">
            <h1 class="text-4xl font-semibold text-teal-400 hover:text-teal-300 transition-colors duration-300">
                ForoHub
            </h1>
        </a>

        <div class="flex gap-3 sm-500:gap-4 items-center">
            <!-- Botón menú móvil -->
            <div class="relative sm-500:hidden group">
                <button
                    id="menuButton"
                    class="relative rounded-t-md cursor-pointer px-1 py-1.5 duration-300 bg-gray-900 text-teal-400 group-hover:bg-gray-800 group-hover:text-teal-600 transition-colors"
                    aria-label="Abrir menú"
                >

                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 2 24 19" fill="currentColor" class="w-8 transition-all duration-300" stroke="currentColor" stroke-width="0.4" style="transform: scaleY(1.2);">
                        <path fillRule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clipRule="evenodd" />
                    </svg>

                </button>

                <!-- Menú desplegable hover -->
                <div
                        class="hidden group-hover:flex absolute top-9 right-0 bg-gray-800 shadow-lg rounded-lg w-44 p-4 z-50 flex-col gap-3 divide-y-2 divide-gray-700 transition-all duration-300"
                >
                    <a
                        th:href="@{/login}"
                        class="text-teal-400 hover:text-teal-600 duration-300 flex items-center gap-2"
                    >
                        <!-- Ícono LockClosedIcon -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="w-5 h-5">
                            <path fill-rule="evenodd"
                                  d="M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z"
                                  clip-rule="evenodd" />
                        </svg>
                        Iniciar sesión
                    </a>

                    <a
                            th:href="${frontendUrl} + '/register'"
                            class="pt-2 text-teal-400 hover:text-teal-600 duration-300 flex items-center gap-2"
                    >
                        <!-- Ícono PencilSquareIcon -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" class="w-5 h-5">
                            <path
                                    d="m5.433 13.917 1.262-3.155A4 4 0 0 1 7.58 9.42l6.92-6.918a2.121 2.121 0 0 1 3 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 0 1-.65-.65Z" />
                            <path
                                    d="M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0 0 10 3H4.75A2.75 2.75 0 0 0 2 5.75v9.5A2.75 2.75 0 0 0 4.75 18h9.5A2.75 2.75 0 0 0 17 15.25V10a.75.75 0 0 0-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5Z" />
                        </svg>
                        Registrarse
                    </a>
                </div>
            </div>

            <!-- Botones normales desktop -->
            <div class="hidden sm-500:flex gap-4">
                <a
                        th:href="@{/login}"
                        class="px-3 sm-500:px-4 py-1.5 sm-500:py-2 border-2 border-teal-400 bg-teal-400 text-gray-900 rounded-md hover:bg-teal-500 hover:border-teal-500 transition-colors duration-300"
                >
                    Iniciar sesión
                </a>
                <a
                        th:href="${frontendUrl} + '/register'"
                        class="px-3 sm-500:px-4 py-1.5 sm-500:py-2 bg-transparent border-2 border-teal-400 text-teal-400 rounded-md hover:bg-teal-400 hover:text-gray-900 transition-colors duration-300"
                >
                    Registrarse
                </a>
            </div>
        </div>
    </div>
</header>

<!-- Formulario -->
<main class="flex justify-center items-center min-h-[90vh] px-5">
    <div class="w-full max-w-md bg-gray-800 rounded-lg shadow-lg p-8">
        <h2 class="text-2xl font-bold text-teal-400 text-center mb-6">Iniciar Sesión</h2>

        <form id="loginForm" th:action="@{/login}" method="post" novalidate>
            <div id="errorBox"
                 th:if="${param.error}"
                 class="text-xs sm-500:text-sm leading-3 sm-500:leading-4 px-3 sm-500:px-4 py-3 w-full rounded-lg text-white bg-red-800 mb-4">
                <span id="errorMessage">Las credenciales proporcionadas son incorrectas.</span>
            </div>

            <div class="mt-5">
                <label for="username" class="block text-sm font-medium text-gray-300 mb-1 sm-500:mb-2">Usuario</label>
                <input type="text" id="username" name="username" th:value="${param.username}" class="w-full p-2 sm-500:p-3 text-sm sm-500:text-base rounded bg-gray-700 text-gray-300 placeholder-gray-500 border-gray-600 focus:outline-hidden focus:ring-2 focus:ring-teal-400 transition-colors duration-200" placeholder="Tu usuario" autocomplete="username" required autofocus />
            </div>

            <div class="mt-5">
                <label for="password" class="block text-sm font-medium text-gray-300 mb-1 sm-500:mb-2">Password</label>
                <input type="password" id="password" name="password" class="w-full p-2 sm-500:p-3 text-sm sm-500:text-base rounded bg-gray-700 text-gray-300 placeholder-gray-500 border-gray-600 focus:outline-hidden focus:ring-2 focus:ring-teal-400 transition-colors duration-200" placeholder="********" autocomplete="current-password" required />
            </div>

            <div class="text-xs sm-500:text-sm leading-4 mt-2 sm-500:mt-1.5 text-left">
                <a th:href="${frontendUrl} + '/forgot-password'" class="text-teal-400 hover:underline">¿Olvidaste tu contraseña?</a>
            </div>

            <button type="submit" class="mt-5 sm-500:mt-[1.15rem] w-full p-2 sm-500:p-3 text-sm sm-500:text-base rounded font-semibold bg-teal-400 text-gray-900 hover:bg-teal-500 transition duration-300">
                Ingresar
            </button>

            <div class="mt-6 text-center">
                <p class="text-xs sm-500:text-sm text-gray-400 flex flex-col sm-380:flex-row gap-0 sm-380:gap-1 justify-center">
                    ¿No tienes una cuenta?
                    <a th:href="${frontendUrl} + '/register'" class="text-teal-400 hover:underline">Regístrate</a>
                </p>
            </div>
        </form>
    </div>
</main>

<footer class="bg-gray-900 text-white py-6 mt-14">
    <div class="container mx-auto flex items-center justify-center gap-1 sm-500:gap-2 text-center text-teal-400">

        <img class='w-5 h-5 sm-500:w-6 sm-500:h-6 invert-[80%]' th:src="@{/icons/laptop-code.svg}" alt="Laptop Code Icon" />

        <p class="text-base sm-500:text-lg font-semibold text-gray-300">
            Developed by <span class="text-teal-400">William Medina</span>
        </p>
    </div>
</footer>
<script th:src="@{/js/menu.js}"></script>
<script th:src="@{/js/login.js}"></script>
</body>
</html>